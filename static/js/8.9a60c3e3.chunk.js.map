{"version":3,"sources":["formatters.js","Stock.js"],"names":["bigNumberFormatter","window","Intl","NumberFormat","undefined","maximumFractionDigits","POWER_SUFFIXES","abbreviatedNumberFormatter","format","num","fixed","b","toPrecision","split","k","length","Math","floor","min","parseInt","slice","c","abs","toFixed","pow","currencyFormatter","minimumFractionDigits","numberFormatter","percentFormatter","style","wholeNumberFormatter","SummaryListItem","title","value","className","x","d","Date","date","y","close","margin","xMax","yMax","Stock","xScale","yScale","match","dispatch","useDispatch","chart","useSelector","state","charts","params","symbol","quote","quotes","React","fetchSymbolData","deviationYFudge","deviation","scaleTime","range","domain","extent","scaleLinear","max","companyName","latestPrice","cx","change","changePercent","md","latestVolume","avgTotalVolume","previousClose","week52Low","week52High","marketCap","peRatio","offset","size","backgroundColor","borderRadius","color","height","lineHeight","width","fill","rx","id","stopColor","stopOpacity","top","left","data","stroke","scale","tickLabelProps","val","i","dx","dy","textAnchor","fontFamily","fontSize","tickStroke","tickTextFill"],"mappings":"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","file":"static/js/8.9a60c3e3.chunk.js","sourcesContent":["/* @flow */\n\nconst bigNumberFormatter = new window.Intl.NumberFormat(undefined, { maximumFractionDigits: 2 });\nconst POWER_SUFFIXES = [\"\", \"K\", \"M\", \"B\", \"T\"];\nexport const abbreviatedNumberFormatter = {\n  format(num: number, fixed?: number): string {\n    if (num === null || num === 0) return \"0\"; // terminate early\n\n    fixed = !fixed || fixed < 0 ? 0 : fixed; // number of decimal places to show\n    const b = num.toPrecision(2).split(\"e\"); // get power\n    const k = b.length === 1 ? 0 : Math.floor(Math.min(parseInt(b[1].slice(1), 10), 14) / 3); // floor at decimals, ceiling at trillions\n    const d = k < 0 ? k : Math.abs(k); // enforce -0 is 0\n    const c = d < 1 ? num.toFixed(0 + fixed) : (num / Math.pow(10, k * 3)).toFixed(1 + fixed); // divide by power\n    return `${bigNumberFormatter.format(c)}${POWER_SUFFIXES[k]}`; // append power\n  },\n};\n\n// Don't use style `currency` because it always prints a currency symbol. Match Google Finance\n// exactly (until supporting other currencies) and don't print the symbol.\nexport const currencyFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n});\n\nexport const numberFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 3,\n  minimumFractionDigits: 3,\n});\n\nexport const percentFormatter: Intl$NumberFormat = new window.Intl.NumberFormat(undefined, {\n  maximumFractionDigits: 2,\n  minimumFractionDigits: 2,\n  style: \"percent\",\n});\n","/* @flow */\n\nimport * as React from \"react\";\nimport { AxisLeft, AxisBottom } from \"@vx/axis\";\nimport { Col, Container, Row } from \"reactstrap\";\nimport {\n  abbreviatedNumberFormatter,\n  currencyFormatter,\n  numberFormatter,\n  percentFormatter,\n} from \"./formatters\";\nimport { deviation, extent, max, min } from \"d3-array\";\nimport { scaleTime, scaleLinear } from \"@vx/scale\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AreaClosed } from \"@vx/shape\";\nimport type { Dispatch } from \"./types\";\nimport { Group } from \"@vx/group\";\nimport { LinearGradient } from \"@vx/gradient\";\nimport cx from \"classnames\";\nimport { fetchSymbolData } from \"./actions\";\n\ntype Props = {\n  match: Object,\n};\n\nconst wholeNumberFormatter = new window.Intl.NumberFormat(undefined);\n\nfunction SummaryListItem({ title, value }: { title: string, value: string }) {\n  return (\n    <li className=\"d-flex justify-content-between border-bottom py-2\">\n      <span>{title}</span>\n      <strong>{value}</strong>\n    </li>\n  );\n}\n\nconst width = 635;\nconst height = 400;\nconst x = (d) => new Date(d.date);\nconst y = (d) => d.close;\n\n// Bounds\nconst margin = {\n  top: 20,\n  bottom: 40,\n  left: 50,\n  right: 0,\n};\nconst xMax = width - margin.left - margin.right;\nconst yMax = height - margin.top - margin.bottom;\n\nexport default function Stock({ match }: Props): React.Node {\n  const dispatch = useDispatch<Dispatch>();\n  const chart = useSelector((state) => state.charts[match.params.symbol]);\n  const quote = useSelector((state) => state.quotes[match.params.symbol]);\n\n  React.useEffect(() => {\n    dispatch(fetchSymbolData(match.params.symbol));\n  }, [dispatch, match.params.symbol]);\n\n  let xScale;\n  let yScale;\n  if (chart != null) {\n    const deviationYFudge = deviation(chart, y) / 2;\n    xScale = scaleTime({\n      range: [0, xMax],\n      domain: extent(chart, x),\n    });\n    yScale = scaleLinear({\n      range: [yMax, 0],\n      domain: [min(chart, y) - deviationYFudge, max(chart, y) + deviationYFudge],\n    });\n  }\n  return (\n    <Container className=\"mb-3 mt-3\">\n      <h2>\n        {quote == null ? \"...\" : quote.companyName} ({match.params.symbol})\n      </h2>\n      <h3>\n        <small>{quote == null ? \"...\" : quote.latestPrice}</small>{\" \"}\n        <span\n          className={cx({\n            \"text-danger\": quote != null && quote.change < 0,\n            \"text-success\": quote != null && quote.change >= 0,\n          })}\n        >\n          {quote == null\n            ? \"...\"\n            : `${quote.change >= 0 ? \"+\" : \"\"}${currencyFormatter.format(quote.change)} (${\n                quote.changePercent >= 0 ? \"+\" : \"\"\n              }${percentFormatter.format(quote.changePercent)})`}\n        </span>\n      </h3>\n      <Row className=\"mt-4\">\n        <Col className=\"border-top border-top-lg pt-2\" md=\"4\">\n          <h4 className=\"mb-3\">Summary</h4>\n          <ul className=\"list-unstyled\">\n            <SummaryListItem\n              title=\"Volume\"\n              value={quote == null ? \"...\" : wholeNumberFormatter.format(quote.latestVolume)}\n            />\n            <SummaryListItem\n              title=\"Avg Daily Volume\"\n              value={quote == null ? \"...\" : wholeNumberFormatter.format(quote.avgTotalVolume)}\n            />\n            <SummaryListItem\n              title=\"Previous Close\"\n              value={quote == null ? \"...\" : currencyFormatter.format(quote.previousClose)}\n            />\n            <SummaryListItem\n              title=\"52-week Range\"\n              value={\n                quote == null\n                  ? \"...\"\n                  : `${currencyFormatter.format(quote.week52Low)}–${currencyFormatter.format(\n                      quote.week52High\n                    )}`\n              }\n            />\n            <SummaryListItem\n              title=\"Mkt. Cap\"\n              value={quote == null ? \"...\" : abbreviatedNumberFormatter.format(quote.marketCap)}\n            />\n            <SummaryListItem\n              title=\"P/E Ratio\"\n              value={\n                quote == null || quote.peRatio == null\n                  ? \"...\"\n                  : numberFormatter.format(quote.peRatio)\n              }\n            />\n          </ul>\n        </Col>\n        <Col className=\"border-top border-top-lg pt-2\" md={{ offset: 1, size: 7 }}>\n          <h4 className=\"mb-3\">History</h4>\n          {chart == null ? (\n            <div\n              className=\"text-center\"\n              style={{\n                backgroundColor: \"#343a40\",\n                borderRadius: \"0.25rem\",\n                color: \"#fff\",\n                height: `${height}px`,\n                lineHeight: `${height}px`,\n              }}\n            >\n              Loading...\n            </div>\n          ) : (\n            <svg width={width} height={height}>\n              <rect x={0} y={0} width={width} height={height} fill=\"#343a40\" rx={\"0.25rem\"} />\n              <LinearGradient id=\"gradient\">\n                <stop offset=\"0%\" stopColor=\"#ffc107\" stopOpacity={1} />\n                <stop offset=\"100%\" stopColor=\"#ffc107\" stopOpacity={0.2} />\n              </LinearGradient>\n              <Group top={margin.top} left={margin.left}>\n                <AreaClosed\n                  data={chart}\n                  xScale={xScale}\n                  yScale={yScale}\n                  x={x}\n                  y={y}\n                  fill={\"url(#gradient)\"}\n                  stroke={\"\"}\n                />\n                <AxisLeft\n                  left={0}\n                  scale={yScale}\n                  stroke={\"rgba(255,255,255,0.3)\"}\n                  top={0}\n                  tickLabelProps={(val, i) => ({\n                    dx: \"-0.25em\",\n                    dy: \"0.25em\",\n                    textAnchor: \"end\",\n                    fontFamily: \"Arial\",\n                    fontSize: 10,\n                    fill: \"rgba(255,255,255,0.9)\",\n                  })}\n                  tickStroke={\"rgba(255,255,255,0.3)\"}\n                  tickTextFill={\"rgba(255,255,255,0.3)\"}\n                />\n                <AxisBottom\n                  scale={xScale}\n                  stroke={\"rgba(255,255,255,0.3)\"}\n                  top={yMax}\n                  tickLabelProps={(val, i) => ({\n                    dy: \"0.25em\",\n                    textAnchor: \"middle\",\n                    fontFamily: \"Arial\",\n                    fontSize: 10,\n                    fill: \"rgba(255,255,255,0.9)\",\n                  })}\n                  tickStroke={\"rgba(255,255,255,0.3)\"}\n                  tickTextFill={\"rgba(255,255,255,0.3)\"}\n                />\n              </Group>\n            </svg>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n"],"sourceRoot":""}